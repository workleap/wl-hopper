[build]
  command = "pnpm doc:generate && pnpm build:pkg && pnpm build:doc && pnpm build:ai-docs && pnpm build:mcp"
  publish = "apps/docs/.next"
  environment = { NODE_OPTIONS = "--max-old-space-size=8192" }

[[plugins]]
  package = "@netlify/plugin-nextjs"

[functions]
  included_files = ["apps/docs/public/**"]

[functions."mcp-server"]
  node_bundler = "esbuild"
  directory = "apps/mcp-server/dist/hosts/netlify"
  included_files = ["dist/hosts/netlify/docs/**", "apps/mcp-server/dist/hosts/netlify/docs/**"] # The first path is for local dev and second path is for deployment.
